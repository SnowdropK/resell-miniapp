{"version":3,"sources":["uni-app:///main.js","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?5d4a","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?92a0","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?3a30","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?bc60","uni-app:///pages/home/order/index.vue","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?1e08","webpack:////Users/sky/jobWorkspace/free-transaction-miniapp/pages/home/order/index.vue?2d1f"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","CommonContainer","data","id","talentId","goodsSaleId","themeColor","isDirectShipment","orderInfo","name","storeNum","totalNum","showDeliveryAmount","originAmout","deliveryAmount","totalGoodsAmount","totalAmount","showAmout","ORDER_TYPE","currentAddressInfo","address","username","tel","saleList","platItem","onLoad","onShow","uni","onUnload","clearInterval","watch","methods","toYuan","getGoodsDetail","goodsDetail","recommendPrice","mainUrl","resaleNum","description","getOrderPrice","orderDetailList","goodsNum","addressId","orderType","payWay","goodsId","number","title","icon","duration","orderAmount","parseInt","getAddressList","addressList","current","getBagList","plats","goToMiniProgram","bind","appid","bindUrl","appId","path","envVersion","process","bindCode","openid","talendId","chooseExpressType","chooseAddress","url","submit","content","success"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,yTAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtDA;AAAA;AAAA;AAAA;AAAm0B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC8Hv1B;AACA;AAEA;AAEA;AAKA;AACA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAEA;AAAA,eAEA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAH;QACAC;QACAC;MACA;MACAE;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;MAAAtB;MAAA;MAAAC;MAAA;MAAAC;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;EACAqB;IAAA;IACAC;MACA;QACAA;QACA;MACA;IACA;IACA;IACA;IACA;MACA;IACA;EACA;EACAC;IACAC;IACAF;IACAA;EACA;EACAG;IACA;IACAnB;MACA;IACA;EACA;EACAoB;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OAOA;kBAAA9B;gBAAA;cAAA;gBAAA;gBAAA,+CALAM;gBAAAA;gBACAyB;gBACAC;gBACAC;gBACAC;gBAEA;kBACA5B;kBACA6B;kBACAH;kBACAC;kBACAC;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACArC,aACA;gBAAA,KACA;kBAAA;kBAAA;gBAAA;gBACAsC,mBACA;kBACAC;kBACApC;gBACA,EACA;gBAAA;gBAAA,OACA;kBACAqC;kBACAC,qCACAzB,sCACAA;kBACA0B;kBACAJ;gBACA;cAAA;gBAPAtC;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAUA;kBACA2C;kBACAzC;kBACA0C;gBACA;cAAA;gBAJA5C;cAAA;gBAAA,OAMAA;gBACA;kBACAyB;oBACAoB;oBACAC;oBACAC;kBACA;gBACA;gBACA;kBACAnC;kBACAC;kBACAC,uCACA,kDACAkC;gBACA;gBACA;kBACApC;kBACAC;kBACAC,uCACA,sEACA;gBACA;gBACA;gBACA;kBACA,yCACAmC,iCACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAlD;gBACAmD;gBACAC;gBACA;kBACAA;oBAAA;kBAAA;gBACA;kBACAA;gBACA;gBAAA,WACAA;gBACA,4DACAA;kBACAlC;gBAAA,EACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAmC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAArD;gBACAsD;kBAAA;gBAAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACAC;MACA;QAAAC;QAAAC;QAAAC;MACA;QACAjC;UACAkC;UACAC;UACA;UACAC,YACAC;QACA;MACA;IACA;IACAN;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;kBAAAO;kBAAAC;kBAAAC;gBAAA;cAAA;gBACAxC;kBACAoB;kBACAC;kBACAC;gBACA;gBACAtB;gBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAyC;MACA;QACA;QACA;QACA;QACA;MACA;MACA;QACA;QACA,kDACA,mCACA,gCACA;QACA,gDACA,iCACA,8BACA;MACA;IACA;IACA;IACAC;MACA1C;QACA2C,8EACA;MAEA;IACA;IACA;IACAC;MACA;QACA5C;UACAoB;UACAC;UACAC;QACA;QACA;MACA;MACA;MACA;QACAP;QACAF;UACA;YACAC;YACApC;UACA;UACA;QACA;QACAsC,mCACAzB,qCACAA;QACA;MACA;;MACAS;QACAoB;QACAyB;QACAC;UACA;YACA;YACA9C;cACA2C;YACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACzZA;AAAA;AAAA;AAAA;AAAkiD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACAtjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/home/order/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/home/order/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=29b5819a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/home/order/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=29b5819a&\"","var components\ntry {\n  components = {\n    uIcon: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.saleList, function (item, __i0__) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.toYuan(item.goodsPrice)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"orderContainer\">\n    <CommonContainer title=\"订单确认\">\n      <!-- 运输方式 -->\n      <view class=\"deliveryMethodBox\">\n        <view>\n          <view\n            class=\"deliveryMethod\"\n            @click=\"chooseExpressType(ORDER_TYPE.PLACE_REWARD_BAG)\"\n          >\n            <view>存至赏袋，方便合并发货</view>\n            <u-icon\n              :name=\"\n                isDirectShipment ? 'checkmark-circle' : 'checkmark-circle-fill'\n              \"\n              :color=\"themeColor\"\n              size=\"24\"\n            ></u-icon>\n          </view>\n          <!-- style=\"border-bottom: 1px dashed #999\" -->\n          <view class=\"deliveryMethod\" @click=\"goToMiniProgram\">\n            <view class=\"name\">\n              {{ platItem.name || \"\" }}（{{\n                platItem.bind ? \"已绑定\" : \"未绑定\"\n              }}）\n            </view>\n            <view v-if=\"!platItem.bind\" class=\"empowerBox\">\n              <text class=\"empowerText\">去绑定</text>\n              <u-icon name=\"arrow-right\" color=\"#c0c0c0\" size=\"16\"></u-icon>\n            </view>\n          </view>\n        </view>\n        <!-- 直接发货 -->\n        <!-- <view\n          class=\"deliveryMethod\"\n          @click=\"chooseExpressType(ORDER_TYPE.DIRECT_SHIPMENT)\"\n        >\n          <view>直接发货</view>\n          <u-icon\n            :name=\"\n              isDirectShipment ? 'checkmark-circle-fill' : 'checkmark-circle'\n            \"\n            :color=\"themeColor\"\n            size=\"24\"\n          ></u-icon>\n        </view>\n        <view class=\"addressBox\">\n          <view>\n            <view>{{ currentAddressInfo.address || \"\" }}</view>\n            <view\n              >{{ currentAddressInfo.username || \"\" }}\n              {{ currentAddressInfo.tel || \"\" }}</view\n            >\n          </view>\n          <u-icon\n            name=\"arrow-right\"\n            size=\"20\"\n            color=\"#c0c0c0\"\n            @click=\"chooseAddress\"\n          ></u-icon>\n        </view> -->\n      </view>\n      <!-- 订单 商品信息 -->\n      <view class=\"skuSumFeeBox\">\n        <view class=\"skuInfoBox\">\n          <image class=\"mainImg\" mode=\"aspectFill\" :src=\"orderInfo.mainUrl\" />\n          <view class=\"skuInfo\">\n            <view class=\"title\">{{ orderInfo.name }}</view>\n            <view class=\"saleUserBox\">\n              <view class=\"saleUser\" v-for=\"item in saleList\" :key=\"item.id\">\n                <image\n                  class=\"saleUserImg\"\n                  :src=\"item.avatarUrl || '/static/images/icons/logo.png'\"\n                />\n                <text class=\"saleUserText\"\n                  >¥{{ toYuan(item.goodsPrice) }} x{{ item.orderNum }}</text\n                >\n              </view>\n            </view>\n            <view class=\"feeBox\">\n              <u-number-box\n                v-model=\"totalNum\"\n                integer\n                :max=\"storeNum || orderInfo.resaleNum\"\n              ></u-number-box>\n            </view>\n          </view>\n        </view>\n        <view class=\"skuFee\">\n          <view class=\"item\">\n            <view class=\"left\">商品总计</view>\n            <view class=\"right\">¥{{ showAmout.totalGoodsAmount }}</view>\n          </view>\n          <view class=\"item\">\n            <view class=\"left\">运费</view>\n            <view class=\"right\">{{\n              isDirectShipment ? showAmout.deliveryAmount : \"免运费\"\n            }}</view>\n          </view>\n          <view class=\"item\">\n            <view class=\"left\"></view>\n            <view class=\"right\" style=\"display: flex; align-items: baseline\">\n              <view class=\"sumNum\">共{{ totalNum }}件 合计：</view>\n              <text class=\"sumPriceText sumPrice\"\n                >￥{{ showAmout.totalAmount }}</text\n              >\n            </view>\n          </view>\n        </view>\n      </view>\n      <!-- 交易说明 -->\n      <view class=\"transactionTipBox\">\n        <view class=\"title\">交易说明</view>\n        <view class=\"content\">{{ orderInfo.description }}</view>\n      </view>\n    </CommonContainer>\n    <!-- 提交按钮 -->\n    <view class=\"submitBox\">\n      <view class=\"submit\" @click=\"submit\">确认上述信息并支付</view>\n    </view>\n  </view>\n</template>\n<script>\n// 自定义公共组件\nimport CommonContainer from \"@/components/commonContainer\";\n// 常量\nimport { themeColor } from \"@/config/theme\";\nimport { ORDER_TYPE } from \"@/consts\";\n// 工具\nimport { toYuan, accAdd, setStorage } from \"@/utils\";\n// service\nimport {\n  fetchGoodsDetail,\n  fetchOrderPrice,\n  fetchOrderPriceBySale,\n} from \"@/api/home\";\nimport { getAddressList } from \"@/api/myInfo\";\nimport { fetchBagList } from \"@/api/publish\";\nimport { talentBind } from \"@/api/common\";\n\nlet timer = null;\n\nexport default {\n  components: {\n    CommonContainer,\n  },\n  data() {\n    return {\n      id: null,\n      talentId: null,\n      goodsSaleId: null,\n      themeColor,\n      isDirectShipment: false,\n      orderInfo: {\n        name: \"\",\n      },\n      storeNum: 0,\n      totalNum: 1,\n      showDeliveryAmount: 0,\n      originAmout: {\n        deliveryAmount: 0,\n        totalGoodsAmount: 0,\n        totalAmount: 0,\n      },\n      showAmout: {\n        deliveryAmount: 0,\n        totalGoodsAmount: 0,\n        totalAmount: 0,\n      },\n      ORDER_TYPE,\n      currentAddressInfo: {\n        address: \"\",\n        username: \"\",\n        tel: \"\",\n      },\n      saleList: [],\n      platItem: {},\n    };\n  },\n  onLoad(options) {\n    const { id = \"\", talentId = \"\", goodsSaleId = \"\" } = options;\n    this.id = +id;\n    this.talentId = +talentId;\n    this.goodsSaleId = +goodsSaleId;\n    this.getGoodsDetail(+id);\n    this.getOrderPrice(1);\n    this.getAddressList();\n    // 查询平台赏袋列表\n    this.getBagList();\n  },\n  onShow() {\n    uni.$on(\"returnAddressData\", (data) => {\n      if (data && data.currentAddressId) {\n        uni.$off(\"returnAddressData\", this.returnAddressData);\n        this.getAddressList(data.currentAddressId);\n      }\n    });\n    const bindCode = uni.getStorageSync(\"weChatBindCode\");\n    const bindOpenId = uni.getStorageSync(\"weChatBindOpenId\");\n    if (bindCode && bindOpenId) {\n      this.bind(bindCode, bindOpenId);\n    }\n  },\n  onUnload() {\n    clearInterval(timer);\n    uni.removeStorageSync(\"weChatBindCode\");\n    uni.removeStorageSync(\"weChatBindOpenId\");\n  },\n  watch: {\n    // 修改商品数量\n    totalNum(val) {\n      this.getOrderPrice(val);\n    },\n  },\n  methods: {\n    toYuan(val) {\n      return toYuan(val);\n    },\n    // 商品详情\n    async getGoodsDetail(id) {\n      const {\n        name = \"\",\n        goodsDetail,\n        recommendPrice,\n        mainUrl,\n        resaleNum,\n      } = await fetchGoodsDetail({ id });\n      this.orderInfo = {\n        name,\n        description: goodsDetail || \"\",\n        recommendPrice: recommendPrice || 0,\n        mainUrl: mainUrl || \"\",\n        resaleNum,\n      };\n    },\n    // 订单价格\n    async getOrderPrice(number) {\n      let data = null;\n      // 购买个人售卖的商品\n      if (this.goodsSaleId) {\n        let orderDetailList = [\n          {\n            goodsNum: number,\n            goodsSaleId: this.goodsSaleId,\n          },\n        ];\n        data = await fetchOrderPriceBySale({\n          addressId: this.currentAddressInfo.id || null,\n          orderType: this.isDirectShipment\n            ? ORDER_TYPE.PLACE_REWARD_BAG\n            : ORDER_TYPE.DIRECT_SHIPMENT,\n          payWay: \"ALI_QR\",\n          orderDetailList,\n        });\n      } else {\n        // 购买当前在售价格最低的商品\n        data = await fetchOrderPrice({\n          goodsId: this.id,\n          talentId: this.talentId,\n          number,\n        });\n      }\n      const { deliveryAmount = 0, orderAmount = 0, saleList } = data || {};\n      if (orderAmount === 0) {\n        uni.showToast({\n          title: \"库存不足\",\n          icon: \"none\",\n          duration: 2000,\n        });\n      }\n      this.originAmout = {\n        deliveryAmount,\n        totalGoodsAmount: orderAmount,\n        totalAmount: this.isDirectShipment\n          ? accAdd(orderAmount, deliveryAmount)\n          : orderAmount,\n      };\n      this.showAmout = {\n        deliveryAmount: toYuan(deliveryAmount),\n        totalGoodsAmount: toYuan(orderAmount),\n        totalAmount: this.isDirectShipment\n          ? toYuan(accAdd(orderAmount, deliveryAmount))\n          : toYuan(orderAmount),\n      };\n      this.saleList = saleList || [];\n      if (this.goodsSaleId) {\n        this.storeNum = saleList[0].storeNum\n          ? parseInt(saleList[0].storeNum)\n          : 0;\n      }\n    },\n    // 地址列表\n    async getAddressList(addressId) {\n      const data = await getAddressList();\n      const addressList = data || [];\n      let current = {};\n      if (addressId) {\n        current = addressList.filter((item) => item.id === addressId)[0];\n      } else {\n        current = addressList.length > 0 ? addressList[0] : {};\n      }\n      const { province = \"\", city = \"\", district = \"\", detail = \"\" } = current;\n      this.currentAddressInfo = {\n        ...current,\n        address: `${province}${city}${district}${detail}`,\n      };\n    },\n    // 平台赏袋\n    async getBagList() {\n      const data = await fetchBagList();\n      const plats = (data || []).filter((item) => this.talentId === item.id);\n      this.platItem = (plats || [])[0] || null;\n    },\n    goToMiniProgram() {\n      const { bind, appid, bindUrl } = this.platItem;\n      if (!bind) {\n        uni.openEmbeddedMiniProgram({\n          appId: appid || \"\",\n          path: `${bindUrl || \"\"}?weChatSource=free-transaction-miniapp`,\n          // develop（开发版），trial（体验版），release（正式版）\n          envVersion:\n            process.env.NODE_ENV === \"production\" ? \"release\" : \"trial\",\n        });\n      }\n    },\n    async bind(bindCode, openid) {\n      await talentBind({ bindCode, openid, talendId: this.talentId });\n      uni.showToast({\n        title: \"小程序绑定成功\",\n        icon: \"none\",\n        duration: 2000,\n      });\n      uni.removeStorageSync(\"weChatBindCode\");\n      uni.removeStorageSync(\"weChatBindOpenId\");\n      this.platItem.bind = true;\n    },\n    // 修改商品数量\n    // numChange(e) {\n    //   this.totalNum = +e.value;\n    //   this.getOrderPrice(+e.value);\n    // },\n    // 选择发货类型\n    chooseExpressType(val) {\n      if (val === ORDER_TYPE.PLACE_REWARD_BAG) {\n        this.isDirectShipment = false;\n        this.originAmout.totalAmount = this.originAmout.totalGoodsAmount;\n        this.showAmout.totalAmount = this.showAmout.totalGoodsAmount;\n        return;\n      }\n      if (val === ORDER_TYPE.DIRECT_SHIPMENT) {\n        this.isDirectShipment = true;\n        this.originAmout.totalAmount = accAdd(\n          this.originAmout.totalGoodsAmount,\n          this.originAmout.deliveryAmount\n        );\n        this.showAmout.totalAmount = accAdd(\n          this.showAmout.totalGoodsAmount,\n          this.showAmout.deliveryAmount\n        );\n      }\n    },\n    // 选择地址\n    chooseAddress() {\n      uni.navigateTo({\n        url: `/pages/me/address/index/index?chooseAddress=1&currentAddressId=${\n          this.currentAddressInfo.id || \"\"\n        }`,\n      });\n    },\n    // 提交订单\n    submit() {\n      if (this.showAmout.totalGoodsAmount === 0) {\n        uni.showToast({\n          title: \"库存不足\",\n          icon: \"none\",\n          duration: 2000,\n        });\n        return;\n      }\n      const totalAmount = this.originAmout.totalAmount;\n      const params = {\n        addressId: this.currentAddressInfo.id || null,\n        orderDetailList: this.saleList.map((item) => {\n          const nextItem = {\n            goodsNum: item.orderNum,\n            goodsSaleId: item.id,\n          };\n          return nextItem;\n        }),\n        orderType: this.isDirectShipment\n          ? ORDER_TYPE.DIRECT_SHIPMENT\n          : ORDER_TYPE.PLACE_REWARD_BAG,\n        // payWay: \"ALI_QR\",\n      };\n      uni.showModal({\n        title: \"提示\",\n        content: `请确认订单信息无误？`,\n        success: (res) => {\n          if (res.confirm) {\n            setStorage(\"createOrderParams\", params);\n            uni.navigateTo({\n              url: `/pages/home/cashier/index?totalAmount=${totalAmount}`,\n            });\n            // this.createOrder();\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.orderContainer {\n  // 运输方式\n  .deliveryMethodBox {\n    // display: flex;\n    // justify-content: space-between;\n    padding: 20rpx;\n    box-sizing: border-box;\n    border-radius: 24rpx;\n    background-color: #fff;\n\n    .deliveryMethod {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      // width: 334rpx;\n      height: 80rpx;\n\n      .empowerBox {\n        display: flex;\n        align-items: center;\n\n        .empowerText {\n          font-size: 24rpx;\n          color: $uni-text-color-grey;\n        }\n      }\n    }\n    .addressBox {\n      display: flex;\n      justify-content: space-between;\n      color: $uni-text-color-grey;\n      font-size: 24rpx;\n    }\n  }\n  // 订单商品信息\n  .skuSumFeeBox {\n    margin-top: 32rpx;\n    padding: 26rpx 20rpx 38rpx;\n    border-radius: 24rpx;\n    background-color: #fff;\n\n    .skuInfoBox {\n      display: flex;\n      padding-bottom: 32rpx;\n      border-bottom: 1px dashed #bbbbbb;\n\n      .mainImg {\n        width: 176rpx;\n        height: 176rpx;\n        background-color: #f3f4f6;\n      }\n\n      .skuInfo {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        margin-left: 22rpx;\n        width: 450rpx;\n\n        .title {\n          font-weight: bold;\n          font-size: 26rpx;\n          color: #222222;\n        }\n        .saleUserBox {\n          display: flex;\n          flex-wrap: wrap;\n          margin-top: 22rpx;\n\n          .saleUser {\n            display: flex;\n            align-items: center;\n            margin-right: 10rpx;\n            .saleUserImg {\n              width: 32rpx;\n              height: 32rpx;\n              border-radius: 40rpx;\n              background-color: $uni-bg-color-grey;\n            }\n            .saleUserText {\n              margin-left: 8rpx;\n              font-size: 20rpx;\n              color: #bfbfbf;\n            }\n          }\n        }\n        .feeBox {\n          display: flex;\n          flex-direction: row-reverse;\n        }\n      }\n    }\n    .skuFee {\n      margin-top: 34rpx;\n      font-size: 24rpx;\n      color: #222222;\n\n      .item {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        margin-top: 32rpx;\n\n        .right {\n          color: #666666;\n        }\n        .sumNum {\n          font-size: 28rpx;\n          font-weight: bold;\n        }\n        .sumPrice {\n          font-size: 38rpx;\n          font-weight: bold;\n          color: #ff3835;\n          .sumPriceText {\n            font-size: 36rpx;\n          }\n        }\n      }\n    }\n  }\n  // 交易说明\n  .transactionTipBox {\n    margin-top: 32rpx;\n    padding: 20rpx 20rpx 30rpx;\n    border-radius: 24rpx;\n    background-color: #fff;\n\n    .title {\n      color: #333333;\n      font-size: 28rpx;\n      font-weight: bold;\n    }\n    .content {\n      margin-top: 12rpx;\n      font-size: 24rpx;\n      color: #9a9a9a;\n    }\n  }\n  .submitBox {\n    position: absolute;\n    bottom: 0;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 180rpx;\n    background-color: #fff;\n\n    .submit {\n      width: 70%;\n      color: #fff;\n      height: 80rpx;\n      line-height: 80rpx;\n      font-size: 30rpx;\n      font-weight: bold;\n      text-align: center;\n      border-radius: 50rpx;\n      background-color: $uni-bg-color;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1684393510727\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}